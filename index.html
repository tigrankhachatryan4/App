<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Headache Tracker</title>

    <!-- iOS/Android PWA settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Headache Tracker">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="manifest" href="manifest.json">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            min-height: 100vh;
            color: #1e293b;
            padding: 20px;
        }
        .card { background: white; border-radius: 20px; box-shadow: 0 25px 50px rgba(0,0,0,0.15); overflow: hidden; max-width: 500px; margin: 0 auto; }
        .header { background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; padding: 40px 30px; text-align: center; position: relative; }
        .header h1 { font-size: 2.2rem; font-weight: 700; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 1.1rem; }
        .settings-btn { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; transition: all 0.3s ease; }
        .settings-btn:hover { background: rgba(255,255,255,0.3); transform: rotate(90deg); }
        .body { padding: 40px 30px; }
        .auth { text-align: center; }
        .pin-input { width: 200px; height: 60px; border: 3px solid #e2e8f0; border-radius: 12px; font-size: 24px; font-weight: bold; text-align: center; margin: 30px auto; letter-spacing: 8px; font-family: monospace; display: block; transition: all 0.3s ease; }
        .pin-input:focus { outline: none; border-color: #6366f1; box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1); transform: scale(1.05); }
        .btn { background: linear-gradient(135deg, #6366f1, #4f46e5); color: white; border: none; padding: 15px 30px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; justify-content: center; min-width: 120px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3); }
        .btn-full { width: 100%; padding: 18px; font-size: 18px; margin-top: 20px; }
        .btn-link { background: none; color: #6366f1; text-decoration: underline; padding: 10px; margin-top: 15px; box-shadow: none; }
        .btn-link:hover { background: rgba(99, 102, 241, 0.1); transform: none; box-shadow: none; }
        .btn-secondary { background: linear-gradient(135deg, #64748b, #475569); }
        .btn-success { background: linear-gradient(135deg, #10b981, #059669); }
        .btn-danger { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .btn-warning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .grid { display: grid; gap: 20px; margin-top: 30px; }
        .card-action { border: 2px solid #e2e8f0; border-radius: 16px; padding: 25px; text-align: center; cursor: pointer; transition: all 0.3s ease; }
        .card-action:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .card-action.primary { background: linear-gradient(135deg, #ef4444, #fca5a5); color: white; }
        .card-action.secondary { background: linear-gradient(135deg, #6366f1, #a5b4fc); color: white; }
        .card-action.tertiary { background: linear-gradient(135deg, #10b981, #86efac); color: white; }
        .icon { font-size: 3rem; margin-bottom: 15px; display: block; }
        .title { font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; }
        .desc { opacity: 0.8; font-size: 0.95rem; }
        .hidden { display: none !important; }
        /* (rest of your CSS unchanged ‚Äì omitted for brevity) */
    </style>
</head>
<body>
    <div class="card">
        <!-- Authentication Section -->
        <div id="authSection">
            <div class="header">
                <h1>ü©∫ Headache Tracker</h1>
                <p>Secure & Private Health Monitoring</p>
            </div>
            <div class="body">
                <div class="auth">
                    <div id="loginView">
                        <h2 class="mb-4">Enter Your PIN</h2>
                        <input type="password" class="pin-input" id="loginPin" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button class="btn btn-full" onclick="login()">üîì Unlock</button>
                        <button class="btn-link" onclick="showRegister()">New user? Create PIN</button>
                    </div>
                    <div id="registerView" class="hidden">
                        <h2 class="mb-4">Create Your PIN</h2>
                        <p style="margin-bottom: 20px; color: #64748b;">Choose a 4-digit PIN</p>
                        <input type="password" class="pin-input" id="registerPin" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button class="btn btn-full" onclick="register()">üíæ Create PIN</button>
                        <button class="btn-link" onclick="showLogin()">Already have PIN? Login</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main App Section -->
        <div id="appSection" class="hidden">
            <!-- Dashboard, report, entries, calendar (unchanged, omitted for brevity) -->
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden" onclick="hideSettings()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2 class="mb-4">‚öôÔ∏è Settings</h2>
            <button class="btn btn-warning btn-full" onclick="changePin()">üîê Change PIN</button>
            <button class="btn btn-danger btn-full" onclick="logout()">üö™ Logout</button>
            <button class="btn btn-secondary mt-4" onclick="hideSettings()">Cancel</button>
        </div>
    </div>

    <!-- Change PIN Modal -->
    <div id="pinModal" class="modal hidden">
        <div class="modal-content">
            <h2 class="mb-4">üîê Change PIN</h2>
            <input type="password" class="pin-input" id="newPin" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <button class="btn btn-success btn-full" onclick="savePin()">üíæ Save</button>
            <button class="btn btn-secondary mt-4" onclick="hidePinModal()">Cancel</button>
        </div>
    </div>

    <script>
        // Utility functions for view switching
        function show(id) {
            const el = document.getElementById(id);
            if (el) el.classList.remove('hidden');
        }
        function hide(id) {
            const el = document.getElementById(id);
            if (el) el.classList.add('hidden');
        }

        // Global variables
        let entries = [], intensity = null, editing = null, menstrual = false, currentDate = new Date();

        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            if (localStorage.getItem('pin')) showLogin(); else showRegister();
        });

        // (rest of your JS code: login(), register(), logout(), saveData(), etc. ‚Äì unchanged)
    </script>
</body>
</html>
